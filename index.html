<html>
<head>
<link rel="stylesheet" href="./semantic.min.css">
<link rel="stylesheet" href="./components/menu.min.css">
<link rel="stylesheet" href="./components/dropdown.min.css">
</head>
<body>
<div class="ui basic modal">
  <div class="ui icon header">
    <i class="paper plane icon"></i>
	  You are paying:&nbsp;<span id="ethAmount"></span>&nbsp;ETH
  </div>
  <div class="content">
    <center>Would you like to submit the transaction?</center>
  </div>
  <div class="actions">
    <div class="ui red basic cancel inverted button">
      <i class="remove icon"></i>
      No
    </div>
    <div class="ui green ok inverted button">
      <i class="checkmark icon"></i>
      Yes
    </div>
  </div>
</div>	
<div class="ui massive menu">
  <a class="active item">
    <img src="./security-shield-lock-512.png"></img>
  </a>
    <h1 style="margin:auto">token-liquidity.io</h1>
  <div class="right menu">
    <div class="ui dropdown item">
      Language <i class="dropdown icon"></i>
      <div class="menu">
        <a class="item">English</a>
        <a class="item">Russian</a>
        <a class="item">Spanish</a>
      </div>
    </div> 
    <div class="item">
      <div class="ui negative small message header" id="metamask">
          Metamask Undetected
      </div>      
    </div>
  </div>
</div> 
<div style="width:98%;margin-right:1%;margin-left:1%;margin-bottom:1%;">	
  <div class="ui three item small menu">
    <div class="item">	
      <div class="ui search">
        <div class="ui icon input">
          <input class="prompt" type="text" placeholder="Search Token...">
          <i class="search icon"></i>
        </div>
        <div class="results"> 
        </div>
      </div>
    </div>
    <div class="item">
        Your Address:&nbsp;<span id="userAddress"></span>
    </div>
    <div class="item">
	Your Balance:&nbsp;<span id="userBalance"></span>
    </div>	      
  </div>	
</div>	
<div id="main">	
  <div class="left-container" style="width:20%;float:left;margin-left:1%;margin-right:1%">  		
    <div>
      <div class="ui segment">  
        <table class="ui fixed single line celled table">
          <thead>
            <tr><th>Symbol</th>
              <th>24Hr Volume</th>
            </tr>
          </thead>
        </table> 	
      </div>  	    
    </div>	    
  </div>		
  <div class="right-container" style="width:77%;float:right;margin-right:1%;">  			  
    <div>	  
      <div class="ui segment">
       <table class="ui fixed single line celled table">
         <thead>
           <tr><th>Liquidity Providers</th>
             <th>Contract</th>
             <th>24Hr Volume</th>
             <th>Commission</th>      
  	     <th>Amount&nbsp;<span id="tradedToken"></span></th>      
             <th>Trade</th>      
           </tr>
         </thead>
       </table>
      </div>
    </div>		    
  </div>	
</div>		
<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
<script src="https://cdn.rawgit.com/caolan/async/3741f80b/dist/async.min.js"></script>  
<script src="js/script.js"></script>  
<script src="./semantic.min.js"></script>
<script src="./components/dropdown.min.js"></script>
<script>
$('.ui.dropdown')
  .dropdown();
</script>
<script>
		setInterval(function() {
			web3.eth.getAccounts(function(err, accounts) {
				if (err) return
				let element = $("#metamask");
				if (accounts[0]) {
 				  let userAddress = accounts[0];					
  				  localStorage.setItem("userAddress", userAddress);					
 	  		          web3.eth.getBalance(userAddress, function(err, balance) {
					let userBalance = (parseInt(balance)/1e18).toFixed(2);  
					element.removeClass("negative");
					element.addClass("success");
					element.text("Metamask Unlocked");
					$('#userAddress').text(userAddress);					  
					$('#userBalance').text(userBalance);
				  });	  
				} else {
					element.removeClass("success");
					element.addClass("negative");
					element.text("Metamask Locked");
				}
			})
		}, 5000) 
</script> 
</body>
</html>
